<!--
Put this file in /layouts/shortcodes/figure.html
NB this overrides Hugo's built-in "figure" shortcode but is backwards compatible
Documentation and licence at https://github.com/liwenyip/hugo-easy-gallery/
-->
<!-- count how many times we've called this shortcode; load the css if it's the first time -->
{{- if not ($.Page.Scratch.Get "figurecount") }}<link rel="stylesheet" href={{ "css/hugo-easy-gallery.css" | relURL }} />{{ end }}
{{- $.Page.Scratch.Add "figurecount" 1 -}}
<!-- use either src or link-thumb for thumbnail image -->
{{- $thumb := .thumbnailUri }}
<div class="boxcenter caption-position-center">
  <figure itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img"{{ if .Parent }} style="background-image: url('{{ $thumb }}');"{{ end }}>
      <img style="padding: .3em; border-radius: 8%;" itemprop="thumbnail" src="{{ $thumb }}"/><!-- <img> hidden if in .gallery -->
    </div>
          <a href="{{ .largestUri }}" data-size="{{ .largewidth }}x{{ .largeheight }}" titlestr="{{ .titlestr }}" myc="{{ .captionstr }}"></a>
  </figure>
</div>
